<template>
    <!-- Rows -->
    <lightning-layout multiple-rows="true">

        <!-- Header row -->
        <lightning-layout-item size="12">
                
            <c-titled-row>
                <c-titled-row scrollable="true" oncustomscroll={handleScrollBottom}>
                    <c-row-component elements={ghostHeaders}></c-row-component>
                </c-titled-row>
            </c-titled-row>

            <c-titled-row>
                <c-titled-row scrollable="false">
                    <c-row-component elements={headers}></c-row-component>
                </c-titled-row>
            </c-titled-row>

        </lightning-layout-item>

            <!-- Data row -->
        <lightning-layout-item size="12">

            <template for:each={rows} for:item="triggerDml">
                <c-titled-row key={triggerDml.key} title={triggerDml.title}>
                    <lightning-layout multiple-rows="true" vertical-align="stretch">
                        <template for:each={triggerDml.rows} for:item="timingItem">
                            <lightning-layout-item key={timingItem.key} size="12">
                                <c-titled-row title={timingItem.title}>
                                    <template if:true={timingItem.isMultipleRows}>
                                        <template for:each={timingItem.elements} for:item="rowy">
                                            <c-row-component key={rowy.key} elements={rowy.elements}></c-row-component>
                                        </template>
                                    </template>
                                    <template if:false={timingItem.isMultipleRows}>
                                        <c-row-component elements={timingItem.elements}></c-row-component>
                                    </template>
                                    
                                </c-titled-row>
                            </lightning-layout-item>
                        </template>
                    </lightning-layout>
                </c-titled-row>
            </template>

            <c-titled-row>
                <c-titled-row scrollable="true" oncustomscroll={handleScrollBottom}>
                    <c-row-component elements={ghostHeaders}></c-row-component>
                </c-titled-row>
            </c-titled-row>

        </lightning-layout-item>
    </lightning-layout>
</template>